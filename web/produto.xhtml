<ui:composition template="/WEB-INF/templates/layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="logo">Produtos</ui:define>
    <ui:define name="titulo">Cadastro de produto</ui:define>

    <ui:define name="conteudo">
        <h:form id="campos">
            <div class="corpo">
                <p:panelGrid columns="2" layout="grid"
                             columnClasses="ui-g-4 ui-md-3 ui-lg-2, ui-g-8 ui-md-9 ui-lg-10"
                             styleClass="ui-panelgrid-blank">

                    <h:form enctype="multipart/form-data">
                        <p:fileUpload value="#{produtoMB.produto.foto}" mode="simple" skinSimple="true"/>
                        <br />
                        <p:commandButton value="Submit" ajax="false" action="#{fileUploadView.upload}" disabled="true" />
                    </h:form>

                    <p:outputLabel value="Foto do produto: " for="foto"/>
                    <h:form id="foto" enctype="multipart/form-data">
                        <p:fileUpload value="#{produtoMB.produto.foto}" mode="simple" skinSimple="true"/>
                    </h:form>


                    <p:outputLabel value="Nome do produto: " for="nome"/>
                    <p:inputText id="nome" required="true"
                                 requiredMessage="Nome deve ser preenchido"
                                 placeholder="Informe o nome"
                                 value="#{produtoMB.produto.nome}"/>

                    <p:outputLabel value="Preço do produto: " for="preco"/>
                    <p:inputText id="preco" required="true"
                                 requiredMessage="Preço deve ser preenchido"
                                 placeholder="Informe o preço do produto"
                                 value="#{produtoMB.produto.preco}"/>

                    <p:outputLabel value="Quantidade em estoque: " for="quantidade"/>
                    <p:inputText id="quantidade" required="true"
                                 requiredMessage="Quantidade deve ser preenchido"
                                 placeholder="Informe a quantidade do produto em estoque"
                                 value="#{produtoMB.produto.quantidadeEstoque}"/>
                </p:panelGrid>
                <p:toolbar>
                    <f:facet name="left">
                        <p:commandButton value="Salvar" update="tabela campos" icon="fa fa-save"
                                         action="#{produtoMB.salvar}"/>

                        <p:commandButton value="Limpar" update="campos" icon="fa fa-eraser"
                                         process="@this"
                                         action="#{produtoMB.limpar}"/>
                    </f:facet>
                </p:toolbar>
            </div>
        </h:form>
        <h:form id="tabela">
            <p:dataTable var="produto" value="#{produtoMB.produtos}">
                <p:column headerText="SKU">
                    <h:outputText value="#{produto.id}"/>
                </p:column>

                <p:column headerText="Nome">
                    <h:outputText value="#{produto.nome}"/>
                </p:column>

                <p:column headerText="Preço Unitário">
                    <h:outputText value="#{produto.preco}"/>
                </p:column>

                <p:column headerText="Quantidade em Estoque">
                    <h:outputText value="#{produto.quantidadeEstoque}"/>
                </p:column>

                <p:column headerText="Foto do Produto">
                    <p:graphicImage name="resources/imagens/#{produto.foto}"/>
                </p:column>

            </p:dataTable>
        </h:form>
    </ui:define>
</ui:composition>